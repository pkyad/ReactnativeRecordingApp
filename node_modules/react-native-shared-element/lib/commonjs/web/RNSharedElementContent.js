var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.RNSharedElementContent=void 0;var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _Rect=require("./Rect");var RNSharedElementContent=function(){function RNSharedElementContent(element,size){(0,_classCallCheck2.default)(this,RNSharedElementContent);this.element=element;this.size=size;}(0,_createClass2.default)(RNSharedElementContent,null,[{key:"getSize",value:function getSize(element){return new Promise(function(resolve){if(element.style.backgroundImage){var img=document.createElement('img');img.onload=function(){resolve(new _Rect.Rect({x:0,y:0,width:img.width,height:img.height}));};img.onerror=function(){return resolve(null);};var url=element.style.backgroundImage;img.src=url.substring(5,url.length-2);return;}resolve(new _Rect.Rect({x:0,y:0,width:element.clientWidth||0,height:element.clientHeight||0}));});}},{key:"getLayout",value:function getLayout(layout,content,resizeMode,reverse){if(!content)return layout;if(!content.element.style.backgroundImage)return layout;var width=layout.width,height=layout.height;var contentAspectRatio=content.size.width/content.size.height;var lo=width/height<contentAspectRatio;var aspectRatioCriteria=reverse?!lo:lo;switch(resizeMode){case'stretch':case'100% 100%':break;case'cover':if(aspectRatioCriteria){width=height*contentAspectRatio;}else{height=width/contentAspectRatio;}break;case'center':width=content.size.width;height=content.size.height;break;case'contain':default:if(aspectRatioCriteria){height=width/contentAspectRatio;}else{width=height*contentAspectRatio;}break;}return new _Rect.Rect({x:layout.x+(layout.width-width)/2,y:layout.y+(layout.height-height)/2,width:width,height:height});}}]);return RNSharedElementContent;}();exports.RNSharedElementContent=RNSharedElementContent;
//# sourceMappingURL=RNSharedElementContent.js.map