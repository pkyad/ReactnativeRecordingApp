{"version":3,"sources":["RNSharedElementNodeManager.ts"],"names":["RNSharedElementNodeManager","nodes","Map","domNode","isParent","ancestorDomNode","node","get","addRef","RNSharedElementNode","set","refCount","releaseRef","delete","instance"],"mappings":"4WAAA,0D,GAGaA,CAAAA,0B,qHACHC,K,CAAQ,GAAIC,CAAAA,GAAJ,E,8FAWdC,O,CACAC,Q,CACAC,e,CACqB,CACrB,GAAIC,CAAAA,IAAI,CAAG,KAAKL,KAAL,CAAWM,GAAX,CAAeJ,OAAf,CAAX,CACA,GAAIG,IAAJ,CAAU,CACRA,IAAI,CAACE,MAAL,GACA,MAAOF,CAAAA,IAAP,CACD,CACDA,IAAI,CAAG,GAAIG,yCAAJ,CAAwBN,OAAxB,CAAiCC,QAAjC,CAA2CC,eAA3C,CAAP,CACA,KAAKJ,KAAL,CAAWS,GAAX,CAAeP,OAAf,CAAwBG,IAAxB,EACA,MAAOA,CAAAA,IAAP,CACD,C,wCAEOA,I,CAA2B,CACjC,GAAMK,CAAAA,QAAQ,CAAGL,IAAI,CAACM,UAAL,EAAjB,CACA,GAAI,CAACD,QAAL,CAAe,CACb,KAAKV,KAAL,CAAWY,MAAX,CAAkBP,IAAI,CAACH,OAAvB,EACD,CACD,MAAOQ,CAAAA,QAAP,CACD,C,mDA5BgD,CAC/C,GAAI,CAACX,0BAA0B,CAACc,QAAhC,CAA0C,CACxCd,0BAA0B,CAACc,QAA3B,CAAsC,GAAId,CAAAA,0BAAJ,EAAtC,CACD,CACD,MAAOA,CAAAA,0BAA0B,CAACc,QAAlC,CACD,C","sourcesContent":["import { RNSharedElementNode } from './RNSharedElementNode';\nimport { IHTMLElement } from './types';\n\nexport class RNSharedElementNodeManager {\n  private nodes = new Map<HTMLElement, RNSharedElementNode>();\n  private static instance: RNSharedElementNodeManager;\n\n  static getInstance(): RNSharedElementNodeManager {\n    if (!RNSharedElementNodeManager.instance) {\n      RNSharedElementNodeManager.instance = new RNSharedElementNodeManager();\n    }\n    return RNSharedElementNodeManager.instance;\n  }\n\n  acquire(\n    domNode: IHTMLElement,\n    isParent: boolean,\n    ancestorDomNode: IHTMLElement\n  ): RNSharedElementNode {\n    let node = this.nodes.get(domNode);\n    if (node) {\n      node.addRef();\n      return node;\n    }\n    node = new RNSharedElementNode(domNode, isParent, ancestorDomNode);\n    this.nodes.set(domNode, node);\n    return node;\n  }\n\n  release(node: RNSharedElementNode) {\n    const refCount = node.releaseRef();\n    if (!refCount) {\n      this.nodes.delete(node.domNode);\n    }\n    return refCount;\n  }\n}\n"]}