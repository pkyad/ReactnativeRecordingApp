{"version":3,"sources":["SharedElement.tsx"],"names":["nodeFromRef","ref","isParent","parentInstance","nodeHandle","undefined","SharedElement","_node","onSetRef","props","onNode","prevProps","otherProps","React","Component"],"mappings":"oiCAAA,oDACA,yC,6FAQO,QAASA,CAAAA,WAAT,CACLC,GADK,CAELC,QAFK,CAGLC,cAHK,CAIqB,CAC1B,GAAMC,CAAAA,UAAU,CAAGH,GAAG,CAAG,gCAAeA,GAAf,CAAH,CAAyBI,SAA/C,CACA,MAAOD,CAAAA,UAAU,CACb,CACEH,GAAG,CAAHA,GADF,CAEEG,UAAU,CAAVA,UAFF,CAGEF,QAAQ,CAAEA,QAAQ,EAAI,KAHxB,CAIEC,cAAc,CAAdA,cAJF,CADa,CAOb,IAPJ,CAQD,C,GAEYG,CAAAA,a,8cAOHC,K,CAAkC,I,OAElCC,Q,CAAW,SAACP,GAAD,CAAc,CAC/B,MAAKM,KAAL,CAAaP,WAAW,CAACC,GAAD,CAAM,IAAN,4CAAxB,CACA,GAAI,MAAKQ,KAAL,CAAWC,MAAf,CAAuB,CACrB,MAAKD,KAAL,CAAWC,MAAX,CAAkB,MAAKH,KAAvB,EACD,CACF,C,oHAbkBI,S,CAA+B,CAChD,GAAI,CAACA,SAAS,CAACD,MAAX,EAAqB,KAAKD,KAAL,CAAWC,MAAhC,EAA0C,KAAKH,KAAnD,CAA0D,CACxD,KAAKE,KAAL,CAAWC,MAAX,CAAkB,KAAKH,KAAvB,EACD,CACF,C,uCAWQ,iBAIH,KAAKE,KAJF,CAELC,MAFK,aAELA,MAFK,CAGFE,UAHE,+DAKP,MAAO,qBAAC,iBAAD,wBAAM,GAAG,CAAE,KAAKJ,QAAhB,CAA0B,WAAW,CAAE,KAAvC,EAAkDI,UAAlD,mDAAP,CACD,C,2BAtBgCC,KAAK,CAACC,S","sourcesContent":["import * as React from 'react';\nimport { View, findNodeHandle, ViewStyle } from 'react-native';\nimport { SharedElementNode } from './types';\n\nexport type SharedElementProps = ViewStyle & {\n  children: React.ReactNode;\n  onNode: (node: SharedElementNode | null) => void;\n};\n\nexport function nodeFromRef(\n  ref: any,\n  isParent?: boolean,\n  parentInstance?: any\n): SharedElementNode | null {\n  const nodeHandle = ref ? findNodeHandle(ref) : undefined;\n  return nodeHandle\n    ? {\n        ref,\n        nodeHandle,\n        isParent: isParent || false,\n        parentInstance,\n      }\n    : null;\n}\n\nexport class SharedElement extends React.Component<SharedElementProps> {\n  componentDidUpdate(prevProps: SharedElementProps) {\n    if (!prevProps.onNode && this.props.onNode && this._node) {\n      this.props.onNode(this._node);\n    }\n  }\n\n  private _node: SharedElementNode | null = null;\n\n  private onSetRef = (ref: any) => {\n    this._node = nodeFromRef(ref, true, this);\n    if (this.props.onNode) {\n      this.props.onNode(this._node);\n    }\n  };\n\n  render() {\n    const {\n      onNode, //eslint-disable-line @typescript-eslint/no-unused-vars\n      ...otherProps\n    } = this.props;\n    return <View ref={this.onSetRef} collapsable={false} {...otherProps} />;\n  }\n}\n"]}